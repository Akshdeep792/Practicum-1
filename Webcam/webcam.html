<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/webcam.css" />

    <title>Webcam</title>
</head>
<body>
    <div class="boss">
        <div class="heading">
            <h1>Verify Your Image</h1>
            <p>A Verification Mail will be sent on the Registered Email</p>
          </div> 
    </div>
    <div class="main">
        <div class="sub">
            <div id="video-wrap">
                <video autoplay="true" width="700" height="400" id="video">
                </video>
                <div id="controller">
                <button id="cap" onclick="capture()">Capture</button>
            </div>
            </div>
        </div>
        <div class="sub">
            <div class="cap">
                <canvas id="canvas" style="overflow:auto"></canvas>

            </div>
            <div class="controller">
                <form action="/Webcam" method="POST"><div style="display: none;">
                  <input type="text" id="img64capture" name="Image64bit" value=""></div>
                  <input id="cap-1" type="submit" value="Submit">
                 </form>
            </div>
        </div>
    </div>
    
      
  <script>
    var video = document.querySelector("#video");
    if (navigator.mediaDevices.getUserMedia) {
      navigator.mediaDevices.getUserMedia({ video: true })
        .then(function (stream) {
          video.srcObject = stream;
        })
        .catch(function (err0r) {
          console.log("Something went wrong!");
        });
    }
    function capture() {
      var canvas = document.getElementById('canvas');     
      var video = document.getElementById('video');
      canvas.width = 500;
      canvas.height = 400;
      canvas.getContext('2d').drawImage(video, 0, 0, 500,400);  
      document.getElementById("img64capture").value = canvas.toDataURL();
      //document.getElementById("printresult").innerHTML = canvas.toDataURL();
    }
    </script>
</body>
</html>